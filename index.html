<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiver — Spanish Point</title>
<link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=DM+Mono:wght@300;400&display=swap" rel="stylesheet">
<style>
:root {
  --bg:      #0f0f0f;
  --surface: #1a1a1a;
  --surface2:#222222;
  --white:   #ffffff;
  --muted:   rgba(255,255,255,0.35);
  --faint:   rgba(255,255,255,0.1);
  --good:    #22c55e;
  --fair:    #f5c800;
  --poor:    #ef4444;
}
* { margin:0; padding:0; box-sizing:border-box; }
html { scroll-behavior:smooth; }
body { background:var(--bg); color:var(--white); font-family:'Archivo Black', sans-serif; overflow-x:hidden; }
body::after {
  content:''; position:fixed; inset:0; pointer-events:none; z-index:9999;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='4' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  opacity:0.07; mix-blend-mode:overlay;
}
header { padding:18px 28px; display:flex; align-items:center; justify-content:space-between; border-bottom:1px solid var(--faint); }
.logo { font-size:18px; letter-spacing:2px; }
.logo-tag { font-family:'DM Mono',monospace; font-size:7px; letter-spacing:3px; text-transform:uppercase; color:var(--muted); margin-top:2px; }
.hero { padding:52px 28px 48px; text-align:center; border-bottom:1px solid var(--faint); }
.break-name { font-size:clamp(52px,13vw,120px); letter-spacing:-2px; line-height:0.9; }
.break-loc { font-family:'DM Mono',monospace; font-size:9px; letter-spacing:3px; text-transform:uppercase; color:var(--muted); margin-top:14px; }
.main { max-width:900px; margin:0 auto; padding:36px 24px 80px; }
.badge { display:inline-block; margin-bottom:24px; font-family:'DM Mono',monospace; font-size:10px; letter-spacing:3px; text-transform:uppercase; padding:7px 18px; border:1.5px solid; }
.badge-epic, .badge-good { color:var(--good); border-color:var(--good); }
.badge-fair  { color:var(--fair); border-color:var(--fair); }
.badge-poor  { color:var(--poor); border-color:var(--poor); }
.badge-flat  { color:var(--muted); border-color:var(--muted); }
.current-card { background:var(--surface); padding:28px; margin-bottom:4px; }
.card-label { font-family:'DM Mono',monospace; font-size:8px; letter-spacing:3px; text-transform:uppercase; color:var(--muted); margin-bottom:22px; }
.current-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:20px; }
.c-val { font-size:clamp(30px,5vw,48px); letter-spacing:-1px; line-height:1; }
.c-unit { font-size:0.42em; opacity:0.4; letter-spacing:0; }
.c-lbl { font-family:'DM Mono',monospace; font-size:8px; letter-spacing:2px; text-transform:uppercase; color:var(--muted); margin-top:7px; }
.sec-label { font-family:'DM Mono',monospace; font-size:8px; letter-spacing:3px; text-transform:uppercase; color:var(--muted); margin:28px 0 8px; display:flex; align-items:center; gap:10px; }
.sec-label::before { content:''; width:16px; height:1px; background:var(--muted); }
.forecast-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(100px,1fr)); gap:3px; }
.slot { background:var(--surface); padding:16px 12px; text-align:center; border-top:2px solid transparent; transition:background 0.15s; }
.slot:hover { background:var(--surface2); }
.slot-time { font-family:'DM Mono',monospace; font-size:9px; letter-spacing:1px; color:var(--muted); margin-bottom:10px; }
.slot-height { font-size:24px; letter-spacing:-1px; line-height:1; }
.slot-unit { font-size:11px; opacity:0.4; letter-spacing:0; }
.slot-detail { font-family:'DM Mono',monospace; font-size:8px; text-transform:uppercase; color:var(--muted); margin-top:7px; line-height:1.7; }
.slot.epic, .slot.good { border-top-color:var(--good); } .slot.epic .slot-height, .slot.good .slot-height { color:var(--good); }
.slot.fair { border-top-color:var(--fair); } .slot.fair .slot-height { color:var(--fair); }
.slot.poor { border-top-color:var(--poor); } .slot.poor .slot-height { color:var(--poor); }
.tide-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(140px,1fr)); gap:3px; }
.tide-card { background:var(--surface); padding:16px 18px; }
.tide-type { font-family:'DM Mono',monospace; font-size:8px; letter-spacing:2px; text-transform:uppercase; color:var(--muted); margin-bottom:4px; }
.tide-time { font-size:22px; letter-spacing:-0.5px; }
.tide-ht { font-family:'DM Mono',monospace; font-size:9px; color:var(--muted); margin-top:3px; }
.seven-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(110px,1fr)); gap:3px; }
.day-card { background:var(--surface); padding:16px 14px; text-align:center; border-top:2px solid transparent; }
.day-card.epic, .day-card.good { border-top-color:var(--good); }
.day-card.fair { border-top-color:var(--fair); }
.day-card.poor { border-top-color:var(--poor); }
.day-name { font-family:'DM Mono',monospace; font-size:8px; letter-spacing:2px; text-transform:uppercase; color:var(--muted); margin-bottom:8px; }
.day-height { font-size:26px; letter-spacing:-1px; }
.day-card.epic .day-height, .day-card.good .day-height { color:var(--good); }
.day-card.fair .day-height { color:var(--fair); }
.day-card.poor .day-height { color:var(--poor); }
.day-detail { font-family:'DM Mono',monospace; font-size:8px; color:var(--muted); margin-top:5px; line-height:1.6; text-transform:uppercase; }
.status { text-align:center; padding:80px 24px; font-family:'DM Mono',monospace; font-size:11px; letter-spacing:2px; text-transform:uppercase; color:var(--muted); }
.status.error { color:var(--poor); }
@media (max-width:600px) {
  .current-grid { grid-template-columns:repeat(2,1fr); }
  header { padding:14px 18px; } .hero { padding:36px 18px 36px; }
  .main { padding:24px 16px 60px; } .current-card { padding:20px; }
}
</style>
</head>
<body>
<header>
  <div><div class="logo">QUIVER</div><div class="logo-tag">Surf Guide</div></div>
</header>
<div class="hero">
  <div class="break-name">SPANISH<br>POINT</div>
  <div class="break-loc">Co. Clare · Ireland · 52.8441° N, 9.4747° W</div>
</div>
<main class="main">
  <div id="app"><div class="status">Loading forecast...</div></div>
</main>
<script>
const LAT = 52.8441, LNG = -9.4747;
function windDir(d){return['N','NE','E','SE','S','SW','W','NW'][Math.round(d/45)%8];}
function rate(h,w,p){
  if(h<0.3) return 'flat';
  if(h>=1.5&&p>=12&&w<5) return 'epic';
  if(h>=0.8&&p>=9&&w<10) return 'good';
  if(h>=0.5&&w<15) return 'fair';
  return 'poor';
}
function rateLabel(r){return{epic:'Epic',good:'Good conditions',fair:'Fair conditions',poor:'Poor conditions',flat:'Flat'}[r];}
function fmtT(iso){return new Date(iso).toLocaleTimeString('en-IE',{hour:'2-digit',minute:'2-digit',hour12:false});}
function fmtDay(iso){
  const d=new Date(iso),t=new Date(),tm=new Date();tm.setDate(tm.getDate()+1);
  if(d.toDateString()===t.toDateString()) return 'Today';
  if(d.toDateString()===tm.toDateString()) return 'Tmrw';
  return d.toLocaleDateString('en-IE',{weekday:'short'});
}
async function load(){
  const app=document.getElementById('app');
  try{
    const [mr,wr]=await Promise.all([
      fetch(`https://marine-api.open-meteo.com/v1/marine?latitude=${LAT}&longitude=${LNG}&hourly=wave_height,wave_period,swell_wave_height,swell_wave_period&daily=wave_height_max,wave_period_max,swell_wave_height_max&wind_speed_unit=kn&timezone=Europe%2FDublin&forecast_days=7`),
      fetch(`https://api.open-meteo.com/v1/forecast?latitude=${LAT}&longitude=${LNG}&hourly=wind_speed_10m,wind_direction_10m&wind_speed_unit=kn&timezone=Europe%2FDublin&forecast_days=7`)
    ]);
    if(!mr.ok) throw new Error('Marine API '+mr.status);
    if(!wr.ok) throw new Error('Wind API '+wr.status);
    const m=await mr.json(), w=await wr.json();
    const times=m.hourly.time,wH=m.hourly.wave_height,wP=m.hourly.wave_period;
    const wS=w.hourly.wind_speed_10m,wD=w.hourly.wind_direction_10m;
    const daily=m.daily;
    const now=new Date();
    const ns=now.toISOString().slice(0,13);
    let ci=times.findIndex(t=>t.startsWith(ns));if(ci<0)ci=0;
    const cH=wH[ci]??0,cP=wP[ci]??0,cWS=wS[ci]??0,cWD=wD[ci]??0;
    const r=rate(cH,cWS,cP);
    const slots=[];
    for(let i=ci;i<ci+24&&i<times.length;i+=3) slots.push({time:times[i],h:wH[i]??0,p:wP[i]??0,ws:wS[i]??0,wd:wD[i]??0});
    const days=daily.time.map((t,i)=>({time:t,h:daily.wave_height_max[i]??0,p:daily.wave_period_max[i]??0}));
    app.innerHTML=`
      <span class="badge badge-${r}">${rateLabel(r)}</span>
      <div class="current-card">
        <div class="card-label">Now · ${now.toLocaleDateString('en-IE',{weekday:'long'})} ${fmtT(now.toISOString())}</div>
        <div class="current-grid">
          <div><div class="c-val">${cH.toFixed(1)}<span class="c-unit">m</span></div><div class="c-lbl">Wave Height</div></div>
          <div><div class="c-val">${cP.toFixed(0)}<span class="c-unit">s</span></div><div class="c-lbl">Period</div></div>
          <div><div class="c-val">${cWS.toFixed(0)}<span class="c-unit">kn</span></div><div class="c-lbl">Wind · ${windDir(cWD)}</div></div>
          <div><div class="c-val">${(cH*3.281).toFixed(1)}<span class="c-unit">ft</span></div><div class="c-lbl">In Feet</div></div>
        </div>
      </div>
      <div class="sec-label">Next 24 Hours</div>
      <div class="forecast-grid">
        ${slots.map(s=>{const sr=rate(s.h,s.ws,s.p);return`
          <div class="slot ${sr}">
            <div class="slot-time">${fmtT(s.time)}</div>
            <div class="slot-height">${s.h.toFixed(1)}<span class="slot-unit">m</span></div>
            <div class="slot-detail">${windDir(s.wd)} ${s.ws.toFixed(0)}kn<br>${s.p.toFixed(0)}s</div>
          </div>`;}).join('')}
      </div>
      <div class="sec-label">7 Day Outlook</div>
      <div class="seven-grid">
        ${days.map(d=>{const dr=rate(d.h,10,d.p);return`
          <div class="day-card ${dr}">
            <div class="day-name">${fmtDay(d.time)}</div>
            <div class="day-height">${d.h.toFixed(1)}<span style="font-size:11px;opacity:0.4;letter-spacing:0">m</span></div>
            <div class="day-detail">${d.p.toFixed(0)}s period</div>
          </div>`;}).join('')}
      </div>`;
  }catch(e){app.innerHTML=`<div class="status error">Couldn't load — ${e.message}</div>`;}
}
load();
</script>
</body>
</html>
